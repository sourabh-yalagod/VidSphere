import{b as q,u as L,w as Q,r as x,m as $,j as e,K,M as _,Q as I,d}from"./index-DDnwWpnW.js";import{D as v,a as w,b as P,c as k,d as C,f as D,e as T}from"./dialog-BtaWrNIM.js";import{A as z}from"./APIloading-_l8mhtE3.js";import{A as V}from"./APIError-mQ8mEKKt.js";import{u as H}from"./useQuery-D_acu4es.js";import{u}from"./useMutation-B8wUL8Fa.js";import{E as R}from"./ellipsis-vertical-Brc_7A9c.js";import{L as m}from"./loader-circle-DDB0R78g.js";import{T as B}from"./trash-2-CzdyvPPe.js";import{C as G}from"./circle-plus-AttvNMnn.js";import"./eye-off-CzfQtg12.js";import"./useBaseQuery-CbK4xK-U.js";import"./utils-km2FGkQ4.js";const ce=()=>{var N;const p=new Date,{toast:s}=q(),E=L(),{userId:F}=Q(),[r,g]=x.useState(""),[l,h]=x.useState(""),[b,j]=x.useState(""),o=$(),M=async()=>{const t=await d.get(`/api/v1/video-play-list/all-play-lists/${F}`);return t==null?void 0:t.data},{data:i,isPending:S,isError:A,error:J}=H({queryKey:["fetchPlaylists"],queryFn:M,staleTime:60*10*1e3}),n=u({mutationFn:async()=>{const t=new FormData;t.append("thumbnail",b[0]),t.append("title",r),t.append("description",l);const a=await d.post("/api/v1/video-play-list/create-playlist",t);return a==null?void 0:a.data},onSuccess:t=>{o.invalidateQueries({queryKey:["fetchPlaylists"]}),s({title:"Playlist created Successfully",description:`At ${p.toLocaleTimeString()}`,duration:2e3})},onError:t=>{s({title:"Playlist creation failed . . . . !",description:t==null?void 0:t.message,variant:"destructive",duration:2e3})}}),y=u({mutationFn:async t=>{const a=new FormData;a.append("thumbnail",b[0]),a.append("title",r),a.append("description",l);const c=await d.put(`/api/v1/video-play-list/modify-playlist/${t}`,a);return c==null?void 0:c.data},onSuccess:()=>{o.invalidateQueries({queryKey:["fetchPlaylists"]}),s({title:"Playlist Modified Successfully",duration:2e3})},onError:t=>{s({title:"Playlist Modification failed . . . . !",description:t==null?void 0:t.message,variant:"destructive",duration:2e3})}}),f=u({mutationFn:async t=>{const a=await d.delete(`/api/v1/video-play-list/delete-playlist/${t}`);return a==null?void 0:a.data},onSuccess:()=>{o.invalidateQueries({queryKey:["fetchPlaylists"]}),s({title:"Playlist Deleted Successfully",description:`At ${p.toLocaleTimeString()}`,duration:2e3})},onError:t=>{s({title:"Playlist Modification failed . . . . !",description:t==null?void 0:t.message,variant:"destructive",duration:2e3})}});return S?e.jsx(z,{}):A?e.jsx(V,{}):e.jsxs("div",{className:"min-h-screen w-full px-3 dark:bg-black pt-7 relative",children:[e.jsx("h1",{className:"text-center text-gray-900 dark:text-white text-2xl font-black",children:"All Play lists"}),e.jsx("div",{className:"flex justify-center text-gray-900 dark:text-slate-400 flex-wrap gap-3 py-5",children:i!=null&&i.data?(N=i==null?void 0:i.data)==null?void 0:N.map(t=>e.jsxs("div",{className:"flex-1 min-w-[250px] max-w-[350px] p-1 border-gray-900 dark:border-slate-700 rounded-xl border-[1px] relative",children:[e.jsx("img",{onClick:()=>E(`/signin/playlist-videos/${t==null?void 0:t._id}`),src:(t==null?void 0:t.thumbnail)??"https://cdn-icons-png.freepik.com/512/4475/4475979.png",className:"w-full rounded-xl object-cover"}),e.jsxs(K,{children:[e.jsx(_,{className:"text-gray-900 dark:text-white absolute right-2 bottom-1 z-10",children:e.jsx(R,{className:"outline-none"})}),e.jsxs(I,{className:"text-gray-900 dark:text-white text-[13px] grid space-y-1 border-gray-900 dark:border-slate-600 bg-opacity-50 cursor-pointer rounded-[7px] bg-gray-200 dark:bg-black text-center w-fit mr-8 p-0",children:[e.jsx("div",{onClick:()=>f.mutate(t._id),className:"px-2 py-1 border-gray-900 dark:border-slate-700 rounded-lg grid place-items-center hover:bg-gray-300 dark:hover:bg-gray-800 transition-all",children:f.isPending?e.jsx(m,{className:"animate-spin"}):"Delete"}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsx("button",{className:"px-2 py-1 border-gray-900 dark:border-slate-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-900 transition-all",children:"Edit Playlist"})}),e.jsxs(P,{className:"sm:max-w-[425px] text-gray-900 dark:text-slate-200 rounded-xl bg-opacity-50 bg-gray-100 dark:bg-black",children:[e.jsxs(k,{children:[e.jsx(C,{className:"text-xl",children:"Edit Playlist"}),e.jsxs(D,{className:"font-semibold tracking-wider",children:["Edit the playlist ",e.jsx("br",{})," as you want"]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-1 underline",children:[e.jsx("label",{htmlFor:"title",className:"text-[17px]",children:"Title"}),e.jsx("input",{id:"title",value:r,onChange:a=>g(a.target.value),className:"w-full min-w-[200px] bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]}),e.jsxs("div",{className:"grid gap-1 underline",children:[e.jsx("label",{htmlFor:"description",className:"text-[17px]",children:"Description"}),e.jsx("textarea",{id:"description",value:l,onChange:a=>h(a.target.value),className:"w-full min-w-[200px] bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]}),e.jsxs("div",{className:"grid gap-1 underline",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-[17px]",children:"Thumbnail"}),e.jsx("input",{id:"thumbnail",onChange:a=>j(a.target.files),type:"file",className:"w-auto bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]})]}),e.jsx(T,{children:e.jsx("button",{onClick:()=>y.mutate(t==null?void 0:t._id),className:"w-full p-2 rounded-xl border-[1px] grid place-items-center",children:y.isPending?e.jsx(m,{className:"animate-spin"}):"Edit and save"})})]})]})]})]}),e.jsx("p",{className:"text-center",children:t==null?void 0:t.title})]},t==null?void 0:t._id)):e.jsxs("div",{className:"text-3xl flex gap-5 min-h-screen w-full justify-center items-center mb-11 text-center text-gray-900 dark:text-white my-auto",children:[e.jsx(B,{className:"text-gray-900 dark:text-white size-12 text-center"}),e.jsx("p",{children:"No Playlists were found . . . . ."})]})}),e.jsx("div",{className:"w-full grid place-items-center text-gray-900 dark:text-white",children:e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsxs("button",{className:"flex gap-3 p-3 border-[1px] rounded-xl border-gray-500 dark:border-slate-500",children:[e.jsx(G,{}),"Create New Playlist"]})}),e.jsxs(P,{className:"sm:max-w-[425px] text-gray-900 dark:text-slate-200 rounded-xl bg-opacity-50 bg-gray-100 dark:bg-black",children:[e.jsxs(k,{children:[e.jsx(C,{className:"text-xl",children:"Create New Playlist"}),e.jsxs(D,{className:"font-semibold tracking-wider",children:["Create a play-list and group ",e.jsx("br",{})," the similar videos together . . . . !"]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-1 underline",children:[e.jsx("label",{htmlFor:"title",className:"text-[17px]",children:"Title"}),e.jsx("input",{id:"title",value:r,onChange:t=>g(t.target.value),className:"w-full min-w-[200px] bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]}),e.jsxs("div",{className:"grid gap-1 underline",children:[e.jsx("label",{htmlFor:"description",className:"text-[17px]",children:"Description"}),e.jsx("textarea",{id:"description",value:l,onChange:t=>h(t.target.value),className:"w-full min-w-[200px] bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]}),e.jsxs("div",{className:"grid gap-1 underline",children:[e.jsx("label",{htmlFor:"thumbnail",className:"text-[17px]",children:"Thumbnail"}),e.jsx("input",{id:"thumbnail",onChange:t=>j(t.target.files),type:"file",className:"w-auto bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]})]}),e.jsx(T,{children:e.jsx("button",{onClick:()=>n.mutate(),className:"w-full p-2 rounded-xl border-[1px] grid place-items-center",children:n!=null&&n.isPending?e.jsx(m,{className:"animate-spin"}):"Create play-list"})})]})]})})]})};export{ce as default};
