import{c as P,r as u,j as t,m as B,u as te,b as O,L as U,d as T,T as pe,f as re,n as we,o as A,p as Se,P as _,q as $,s as N,t as C,v as ye,w as je}from"./index-DLPQuFyB.js";import{u as Ce}from"./useQuery-DApuE4hg.js";import{A as Ne}from"./APIloading-BTN7uEY7.js";import{A as Pe}from"./APIError-BWhawoey.js";import{u as D}from"./useMutation-CLAA17dP.js";import{B as J}from"./bell-KdlITBRd.js";import{D as le,a as oe,b as ne,c as se,d as ae,f as ie,e as ce}from"./dialog-Cs5hdKfH.js";import{L as de}from"./loader-circle-Ct6UWSQg.js";import{u as ke}from"./HandleLikes-hPqxYSln.js";import{u as Te}from"./AddToWatchLater-CZcP3DZ5.js";import{E as Ee}from"./eye-CJAGghxz.js";import{c as Ae,V as Le}from"./Video-CzMNqvxG.js";import"./useBaseQuery-DC6tQKz4.js";import"./utils-km2FGkQ4.js";import"./eye-off-BKLs_M59.js";import"./ellipsis-vertical-DC2i2kg6.js";/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=P("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=P("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=P("MessageCircleHeart",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M15.8 9.2a2.5 2.5 0 0 0-3.5 0l-.3.4-.35-.3a2.42 2.42 0 1 0-3.2 3.6l3.6 3.5 3.6-3.5c1.2-1.2 1.1-2.7.2-3.7",key:"43lnbm"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=P("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=P("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=P("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=P("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),Ue=({apiResponse:e})=>{var c,f;const[o,l]=u.useState(!0),[s,n]=u.useState(.8),[a,i]=u.useState(0),r=u.useRef(null),d=()=>{var g,b;o?(g=r.current)==null||g.pause():(b=r.current)==null||b.play(),l(!o)},h=g=>{const b=parseFloat(g.target.value);r.current&&(r.current.volume=b),n(b)},m=g=>{const b=parseFloat(g.target.value);r.current&&(r.current.currentTime=r.current.duration*b/100),i(b)},x=()=>{if(r.current){const g=r.current.currentTime/r.current.duration*100;i(g)}};return t.jsxs("div",{children:[t.jsxs("div",{className:"w-full max-w-4xl md:mt-2 mx-auto bg-black group relative",children:[t.jsx("video",{ref:r,src:e==null?void 0:e.videoFile,onTimeUpdate:x,className:"w-full",onClick:d}),t.jsxs("div",{id:"controller",className:"flex gap-2 z-10 px-2 justify-around absolute bottom-0 w-full bg-black bg-opacity-70 items-center p-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[t.jsx("button",{onClick:d,className:"text-white text-xl animate-pulse",children:o?t.jsx(Ve,{}):t.jsx(Fe,{})}),t.jsx("input",{type:"range",min:"0",max:"100",value:a,onChange:m,className:"w-full animate-out"}),t.jsxs("div",{className:"grid place-items-center",children:[t.jsx("p",{className:"text-white text-sm items-center",children:"Volume"}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:s,onChange:h,className:"w-20"})]})]})]}),t.jsxs("div",{className:"relative my-2 px-3 w-full rounded-xl bg-white dark:dark:bg-black bg-white bg-opacity-60 border-[1px] border-slate-300 dark:border-slate-800 text-slate-700 dark:text-slate-300 text-[15px] sm:text-xl",children:[t.jsx("p",{className:"absolute top-0 left-3 text-slate-600 dark:text-slate-400 min-h-2 text-[13px] pb-4",children:"Title"}),t.jsxs("div",{className:"flex pt-5 pb-2",children:[(c=e==null?void 0:e.title)==null?void 0:c.substring(0,50),t.jsx("p",{children:((f=e==null?void 0:e.title)==null?void 0:f.length)>50?". . . . . .":"."})]})]})]})},Ie=({apiResponse:e})=>{var i,r,d,h,m,x;const o=B(),l=te(),{toast:s}=O(),a=D({mutationFn:async({ChannelId:c})=>{const f=await T.post("/api/v1/users/handle-subscribers",{ChannelId:c});return f==null?void 0:f.data},onSuccess:c=>{console.log(c),o.invalidateQueries({queryKey:["playVideo"]}),s({title:"Subscription status Toggled succesffuly . . . .!",description:`At  + ${time.toLocaleTimeString()}`,duration:3e3})},onError:c=>{s({title:(c==null?void 0:c.message)||"failed please try again . . . . . !",description:"At "+time.toLocaleTimeString(),variant:"destructive",duration:3e3}),console.log("error")}});return t.jsx("div",{className:"flex w-full px-2 bg-slate-200 dark:bg-black my-1 rounded-xl p-1 gap-2 text-slate-700 dark:text-white items-center justify-center border-slate-500 border-[1px]",children:t.jsxs("div",{className:"flex w-full items-center justify-around gap-10",children:[t.jsxs("div",{className:"flex items-center gap-2 justify-between relative",children:[t.jsx("img",{onClick:()=>{var c;return l(`/signin/user-profile/${(c=e==null?void 0:e.Uploader)==null?void 0:c._id}`)},className:"rounded-full w-10 h-10 sm:h-12 sm:w-12",src:(i=e==null?void 0:e.Uploader)==null?void 0:i.avatar,alt:"https://cdn-icons-png.flaticon.com/512/4794/4794936.png"}),t.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[t.jsx("p",{className:"flex",children:(r=e==null?void 0:e.Uploader)==null?void 0:r.username}),t.jsxs("p",{className:"flex text-[13px] text-slate-500 sm:text-[18px]",children:["Subscribers : ",((d=e==null?void 0:e.Uploader)==null?void 0:d.subscriberCount)??" 0"]})]})]}),t.jsx("div",{className:"flex items-center",children:t.jsx("button",{onClick:()=>a.mutate({ChannelId:e==null?void 0:e.owner}),className:`${(h=e==null?void 0:e.Uploader)!=null&&h.isSubscribed?"bg-gray-700":"bg-red-600"} text-white py-1 px-2 rounded-xl sm:text-[15px] tracking-widest grid place-items-center`,children:a.isPending?t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{className:"animate-spin"}),t.jsxs("p",{className:"flex gap-2 items-center",children:["Subscribe",((m=e==null?void 0:e.Uploader)==null?void 0:m.isSubscribed)&&t.jsx(J,{className:"size-3 sm:size-4 md:size-5"})]})]}):t.jsxs("p",{className:"flex gap-2 items-center",children:["Subscribe",((x=e==null?void 0:e.Uploader)==null?void 0:x.isSubscribed)&&t.jsx(J,{className:"size-3 sm:size-4 md:size-5"})]})})})]})})},We=({videoId:e})=>{te();const[o,l]=u.useState(""),[s,n]=u.useState(""),[a,i]=u.useState(""),{toast:r}=O(),d=new Date,h=B(),x=D({mutationFn:async c=>{const f=new FormData;f.append("thumbnail",a[0]),f.append("title",o),f.append("description",s);const g=await T.patch(`/api/v1/videos/update-video/${c}`,f);return g==null?void 0:g.data},onSuccess:()=>{h.invalidateQueries({queryKey:["playVideo"]}),r({title:"Video Updated Successfully with new Title,Description and Avatar . . . ",description:`At : ${d.toLocaleTimeString()}`,variant:"default",duration:2e3})},onError:c=>{r({title:`Video updating process failed due to ${c==null?void 0:c.message} . . . `,description:`At : ${d.toLocaleTimeString()}`,variant:"destructive",duration:2e3})}});return t.jsx("div",{className:"max-h-screen grid place-items-center",children:t.jsxs(le,{children:[t.jsx(oe,{asChild:!0,children:t.jsxs("button",{className:"flex items-center gap-2 hover:scale-105 cursor-pointer transition",children:[t.jsx(He,{className:"w-5 h-5"}),"Edit"]})}),t.jsxs(ne,{className:"bg-white w-full dark:bg-black text-black dark:text-white rounded-xl border-gray-300 dark:border-gray-700 transition",children:[t.jsxs(se,{children:[t.jsxs(ae,{className:"text-2xl w-full flex justify-between items-start mt-3 font-semibold mb-2",children:[t.jsx("p",{children:"Edit video"}),t.jsx("img",{className:"size-9 sm:size-11 rounded-full",src:"https://lh3.googleusercontent.com/rormhrw_yZt2v1OKZBaiFCSt8b8QU02kEKiuilfgnpGkOMQd87xm7b7SyIlGoHsL18M"})]}),t.jsx(ie,{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Make changes to your profile here. Click save when you're done."})]}),t.jsxs("div",{className:"space-y-4 w-full",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"title",className:"block text-[14px] sm:text-lg font-medium mb-1",children:"Title"}),t.jsx("input",{id:"title",value:o,placeholder:"Title",onChange:c=>l(c.target.value),className:"w-full p-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-black dark:text-white outline-none focus:ring-1 focus:ring-blue-600 transition"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"description",className:"block text-[14px] sm:text-lg font-medium mb-1",children:"Description"}),t.jsx("textarea",{id:"description",placeholder:"Description . . . . . . .",value:s,onChange:c=>n(c.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 text-black dark:text-white outline-none focus:ring-1 focus:ring-blue-500 transition"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"thumbnail",className:"block text-[14px] sm:text-lg font-medium mb-1",children:"Thumbnail"}),t.jsx("input",{id:"thumbnail",onChange:c=>i(c.target.files),type:"file",className:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:border-0 file:text-sm file:font-semibold file:rounded-xl file:bg-blue-50 dark:file:bg-gray-700 file:text-blue-700 dark:file:text-gray-300 hover:file:bg-blue-100 dark:hover:file:bg-gray-600 transition"})]})]}),t.jsx(ce,{className:"mt-4",children:t.jsx("button",{onClick:()=>x.mutate(e),className:"w-full p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex justify-center items-center",children:x.isPending?t.jsx(de,{className:"animate-spin w-5 h-5"}):"Save Changes"})})]})]})})},Oe=({apiResponse:e,videoId:o})=>{var i;const{handleLikes:l}=ke(),{watchLaterLoading:s,addToWatchLater:n}=Te(),{toast:a}=O();return t.jsxs("div",{className:"w-full flex gap-2 p-1 items-center justify-around text-[11px] text-slate-600 dark:text-slate-400 rounded-xl border-slate-500 border-[1px]",children:[t.jsx("div",{className:"",children:t.jsxs("p",{onClick:()=>{var r;return l({userId:(r=e==null?void 0:e.Uploader)==null?void 0:r._id,videoId:o})},className:"flex gap-1 dark:text-white text-slate-700",children:[t.jsx(pe,{className:"size-5"}),((i=e==null?void 0:e.totalLikes[0])==null?void 0:i.likes)??"0"]})}),t.jsxs("div",{onClick:()=>navigator.clipboard.writeText(e==null?void 0:e.videoFile).then(()=>a({title:"copied link . . . .!"})).catch(()=>a({title:"Link copy failed",variant:"destructive"})),className:"grid place-items-center hover:scale-105 transition-all cursor-pointer",children:[t.jsx(De,{className:"size-5"}),t.jsx("p",{children:"( Video URL )"})]}),t.jsx("div",{onClick:()=>n(o),className:"grid gap-1 place-items-center border-[1px] p-2 sm:py-3 sm:px-1 border-slate-300 dark:border-slate-700 rounded-xl items-center hover:scale-95 transition-all cursor-pointer",children:t.jsx("p",{children:s?t.jsx(de,{className:"animate-spin"}):"add to watch later"})}),(e==null?void 0:e.owner)==re().userId?t.jsx("div",{className:"grid place-content-center",children:t.jsx(We,{videoId:o})}):"",t.jsxs("p",{className:"grid place-items-center",children:[t.jsx(Ee,{className:"size-5"}),"Views - ",e==null?void 0:e.views]})]})};function $e(e,[o,l]){return Math.min(l,Math.max(o,e))}function Xe(e,o){return u.useReducer((l,s)=>o[l][s]??l,e)}var Q="ScrollArea",[ue,kt]=we(Q),[Ye,p]=ue(Q),K=u.forwardRef((e,o)=>{const{__scopeScrollArea:l,type:s="hover",dir:n,scrollHideDelay:a=600,...i}=e,[r,d]=u.useState(null),[h,m]=u.useState(null),[x,c]=u.useState(null),[f,g]=u.useState(null),[b,w]=u.useState(null),[S,z]=u.useState(0),[q,V]=u.useState(0),[M,L]=u.useState(!1),[F,H]=u.useState(!1),v=A(o,k=>d(k)),y=Se(n);return t.jsx(Ye,{scope:l,type:s,dir:y,scrollHideDelay:a,scrollArea:r,viewport:h,onViewportChange:m,content:x,onContentChange:c,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:M,onScrollbarXEnabledChange:L,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:F,onScrollbarYEnabledChange:H,onCornerWidthChange:z,onCornerHeightChange:V,children:t.jsx(_.div,{dir:y,...i,ref:v,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":q+"px",...e.style}})})});K.displayName=Q;var me="ScrollAreaViewport",qe=u.forwardRef((e,o)=>{const{__scopeScrollArea:l,children:s,nonce:n,...a}=e,i=p(me,l),r=u.useRef(null),d=A(o,r,i.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(_.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});qe.displayName=me;var j="ScrollAreaScrollbar",Be=u.forwardRef((e,o)=>{const{forceMount:l,...s}=e,n=p(j,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=n,r=e.orientation==="horizontal";return u.useEffect(()=>(r?a(!0):i(!0),()=>{r?a(!1):i(!1)}),[r,a,i]),n.type==="hover"?t.jsx(Qe,{...s,ref:o,forceMount:l}):n.type==="scroll"?t.jsx(Ke,{...s,ref:o,forceMount:l}):n.type==="auto"?t.jsx(he,{...s,ref:o,forceMount:l}):n.type==="always"?t.jsx(Z,{...s,ref:o}):null});Be.displayName=j;var Qe=u.forwardRef((e,o)=>{const{forceMount:l,...s}=e,n=p(j,e.__scopeScrollArea),[a,i]=u.useState(!1);return u.useEffect(()=>{const r=n.scrollArea;let d=0;if(r){const h=()=>{window.clearTimeout(d),i(!0)},m=()=>{d=window.setTimeout(()=>i(!1),n.scrollHideDelay)};return r.addEventListener("pointerenter",h),r.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),r.removeEventListener("pointerenter",h),r.removeEventListener("pointerleave",m)}}},[n.scrollArea,n.scrollHideDelay]),t.jsx($,{present:l||a,children:t.jsx(he,{"data-state":a?"visible":"hidden",...s,ref:o})})}),Ke=u.forwardRef((e,o)=>{const{forceMount:l,...s}=e,n=p(j,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Y(()=>d("SCROLL_END"),100),[r,d]=Xe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(r==="idle"){const h=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[r,n.scrollHideDelay,d]),u.useEffect(()=>{const h=n.viewport,m=a?"scrollLeft":"scrollTop";if(h){let x=h[m];const c=()=>{const f=h[m];x!==f&&(d("SCROLL"),i()),x=f};return h.addEventListener("scroll",c),()=>h.removeEventListener("scroll",c)}},[n.viewport,a,d,i]),t.jsx($,{present:l||r!=="hidden",children:t.jsx(Z,{"data-state":r==="hidden"?"hidden":"visible",...s,ref:o,onPointerEnter:N(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:N(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),he=u.forwardRef((e,o)=>{const l=p(j,e.__scopeScrollArea),{forceMount:s,...n}=e,[a,i]=u.useState(!1),r=e.orientation==="horizontal",d=Y(()=>{if(l.viewport){const h=l.viewport.offsetWidth<l.viewport.scrollWidth,m=l.viewport.offsetHeight<l.viewport.scrollHeight;i(r?h:m)}},10);return E(l.viewport,d),E(l.content,d),t.jsx($,{present:s||a,children:t.jsx(Z,{"data-state":a?"visible":"hidden",...n,ref:o})})}),Z=u.forwardRef((e,o)=>{const{orientation:l="vertical",...s}=e,n=p(j,e.__scopeScrollArea),a=u.useRef(null),i=u.useRef(0),[r,d]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=be(r.viewport,r.content),m={...s,sizes:r,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:c=>a.current=c,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:c=>i.current=c};function x(c,f){return lt(c,i.current,r,f)}return l==="horizontal"?t.jsx(Ze,{...m,ref:o,onThumbPositionChange:()=>{if(n.viewport&&a.current){const c=n.viewport.scrollLeft,f=R(c,r,n.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:c=>{n.viewport&&(n.viewport.scrollLeft=c)},onDragScroll:c=>{n.viewport&&(n.viewport.scrollLeft=x(c,n.dir))}}):l==="vertical"?t.jsx(Ge,{...m,ref:o,onThumbPositionChange:()=>{if(n.viewport&&a.current){const c=n.viewport.scrollTop,f=R(c,r);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:c=>{n.viewport&&(n.viewport.scrollTop=c)},onDragScroll:c=>{n.viewport&&(n.viewport.scrollTop=x(c))}}):null}),Ze=u.forwardRef((e,o)=>{const{sizes:l,onSizesChange:s,...n}=e,a=p(j,e.__scopeScrollArea),[i,r]=u.useState(),d=u.useRef(null),h=A(o,d,a.onScrollbarXChange);return u.useEffect(()=>{d.current&&r(getComputedStyle(d.current))},[d]),t.jsx(fe,{"data-orientation":"horizontal",...n,ref:h,sizes:l,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":X(l)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,x)=>{if(a.viewport){const c=a.viewport.scrollLeft+m.deltaX;e.onWheelScroll(c),ve(c,x)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:W(i.paddingLeft),paddingEnd:W(i.paddingRight)}})}})}),Ge=u.forwardRef((e,o)=>{const{sizes:l,onSizesChange:s,...n}=e,a=p(j,e.__scopeScrollArea),[i,r]=u.useState(),d=u.useRef(null),h=A(o,d,a.onScrollbarYChange);return u.useEffect(()=>{d.current&&r(getComputedStyle(d.current))},[d]),t.jsx(fe,{"data-orientation":"vertical",...n,ref:h,sizes:l,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":X(l)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,x)=>{if(a.viewport){const c=a.viewport.scrollTop+m.deltaY;e.onWheelScroll(c),ve(c,x)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:W(i.paddingTop),paddingEnd:W(i.paddingBottom)}})}})}),[Je,xe]=ue(j),fe=u.forwardRef((e,o)=>{const{__scopeScrollArea:l,sizes:s,hasThumb:n,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:r,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:m,onResize:x,...c}=e,f=p(j,l),[g,b]=u.useState(null),w=A(o,v=>b(v)),S=u.useRef(null),z=u.useRef(""),q=f.viewport,V=s.content-s.viewport,M=C(m),L=C(d),F=Y(x,10);function H(v){if(S.current){const y=v.clientX-S.current.left,k=v.clientY-S.current.top;h({x:y,y:k})}}return u.useEffect(()=>{const v=y=>{const k=y.target;(g==null?void 0:g.contains(k))&&M(y,V)};return document.addEventListener("wheel",v,{passive:!1}),()=>document.removeEventListener("wheel",v,{passive:!1})},[q,g,V,M]),u.useEffect(L,[s,L]),E(g,F),E(f.content,F),t.jsx(Je,{scope:l,scrollbar:g,hasThumb:n,onThumbChange:C(a),onThumbPointerUp:C(i),onThumbPositionChange:L,onThumbPointerDown:C(r),children:t.jsx(_.div,{...c,ref:w,style:{position:"absolute",...c.style},onPointerDown:N(e.onPointerDown,v=>{v.button===0&&(v.target.setPointerCapture(v.pointerId),S.current=g.getBoundingClientRect(),z.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),H(v))}),onPointerMove:N(e.onPointerMove,H),onPointerUp:N(e.onPointerUp,v=>{const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),document.body.style.webkitUserSelect=z.current,f.viewport&&(f.viewport.style.scrollBehavior=""),S.current=null})})})}),I="ScrollAreaThumb",Re=u.forwardRef((e,o)=>{const{forceMount:l,...s}=e,n=xe(I,e.__scopeScrollArea);return t.jsx($,{present:l||n.hasThumb,children:t.jsx(et,{ref:o,...s})})}),et=u.forwardRef((e,o)=>{const{__scopeScrollArea:l,style:s,...n}=e,a=p(I,l),i=xe(I,l),{onThumbPositionChange:r}=i,d=A(o,x=>i.onThumbChange(x)),h=u.useRef(),m=Y(()=>{h.current&&(h.current(),h.current=void 0)},100);return u.useEffect(()=>{const x=a.viewport;if(x){const c=()=>{if(m(),!h.current){const f=ot(x,r);h.current=f,r()}};return r(),x.addEventListener("scroll",c),()=>x.removeEventListener("scroll",c)}},[a.viewport,m,r]),t.jsx(_.div,{"data-state":i.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:N(e.onPointerDownCapture,x=>{const f=x.target.getBoundingClientRect(),g=x.clientX-f.left,b=x.clientY-f.top;i.onThumbPointerDown({x:g,y:b})}),onPointerUp:N(e.onPointerUp,i.onThumbPointerUp)})});Re.displayName=I;var G="ScrollAreaCorner",tt=u.forwardRef((e,o)=>{const l=p(G,e.__scopeScrollArea),s=!!(l.scrollbarX&&l.scrollbarY);return l.type!=="scroll"&&s?t.jsx(rt,{...e,ref:o}):null});tt.displayName=G;var rt=u.forwardRef((e,o)=>{const{__scopeScrollArea:l,...s}=e,n=p(G,l),[a,i]=u.useState(0),[r,d]=u.useState(0),h=!!(a&&r);return E(n.scrollbarX,()=>{var x;const m=((x=n.scrollbarX)==null?void 0:x.offsetHeight)||0;n.onCornerHeightChange(m),d(m)}),E(n.scrollbarY,()=>{var x;const m=((x=n.scrollbarY)==null?void 0:x.offsetWidth)||0;n.onCornerWidthChange(m),i(m)}),h?t.jsx(_.div,{...s,ref:o,style:{width:a,height:r,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function W(e){return e?parseInt(e,10):0}function be(e,o){const l=e/o;return isNaN(l)?0:l}function X(e){const o=be(e.viewport,e.content),l=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-l)*o;return Math.max(s,18)}function lt(e,o,l,s="ltr"){const n=X(l),a=n/2,i=o||a,r=n-i,d=l.scrollbar.paddingStart+i,h=l.scrollbar.size-l.scrollbar.paddingEnd-r,m=l.content-l.viewport,x=s==="ltr"?[0,m]:[m*-1,0];return ge([d,h],x)(e)}function R(e,o,l="ltr"){const s=X(o),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,a=o.scrollbar.size-n,i=o.content-o.viewport,r=a-s,d=l==="ltr"?[0,i]:[i*-1,0],h=$e(e,d);return ge([0,i],[0,r])(h)}function ge(e,o){return l=>{if(e[0]===e[1]||o[0]===o[1])return o[0];const s=(o[1]-o[0])/(e[1]-e[0]);return o[0]+s*(l-e[0])}}function ve(e,o){return e>0&&e<o}var ot=(e,o=()=>{})=>{let l={left:e.scrollLeft,top:e.scrollTop},s=0;return function n(){const a={left:e.scrollLeft,top:e.scrollTop},i=l.left!==a.left,r=l.top!==a.top;(i||r)&&o(),l=a,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function Y(e,o){const l=C(e),s=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),u.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(l,o)},[l,o])}function E(e,o){const l=C(o);ye(()=>{let s=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(l)});return n.observe(e),()=>{window.cancelAnimationFrame(s),n.unobserve(e)}}},[e,l])}const nt=({apiResponse:e})=>{var s;const[o,l]=u.useState(!1);return t.jsxs(K,{className:"relative px-2 my-1 max-h-[300px] lg:h-auto w-full rounded-xl border-slate-500 border-[1px]",children:[t.jsx("p",{className:"absolute top-0 left-3 text-slate-600 dark:text-slate-400 text-[13px] pb-4",children:"Description"}),t.jsxs("button",{className:" absolute bottom-0 right-3 text-[12px] text-slate-600 dark:text-slate-400",onClick:()=>l(!o),children:["Show ",o?"less......":"more......"]}),t.jsx("p",{className:"pt-5 pb-2 text-slate-500 dark:text-slate-300",children:o?`${e==null?void 0:e.description}`:`${(s=e==null?void 0:e.description)==null?void 0:s.substring(0,150)}......`})]})},ee=({userId:e,videoId:o,type:l,commentId:s})=>{const n=B(),[a,i]=u.useState(""),{toast:r}=O(),d=new Date,m=D({mutationFn:async({comment:b,userId:w})=>{const S=await T.post(`/api/v1/comments/add-comment/${o}`,{comment:b||"newComment from User",userId:w});return S==null?void 0:S.data},onSuccess:()=>{n.invalidateQueries({queryKey:["playVideo"]}),r({title:"Comment Succesfull",description:"At "+d.toLocaleTimeString(),duration:3e3})},onError:b=>{r({title:(b==null?void 0:b.message)||"failed please try again . . . . . !",description:"At "+d.toLocaleTimeString(),variant:"destructive",duration:3e3})}}),c=D({mutationFn:async({commentId:b,comment:w})=>{await T.patch(`/api/v1/comments/c/edit-comment/${b}`,{comment:w||"newComment from User"})},onSuccess:()=>{n.invalidateQueries({queryKey:["playVideo"]}),r({title:"Comment Edited Successfully . . . .!",description:"At "+d.toLocaleTimeString(),duration:3e3})},onError:b=>{r({title:(b==null?void 0:b.message)||"failed please try again . . . . . !",description:"At "+d.toLocaleTimeString(),variant:"destructive",duration:3e3})}}),g=D({mutationFn:async b=>{const w=await T.delete(`/api/v1/comments/c/delete-comment/${b}`);return w==null?void 0:w.data},onSuccess:()=>{n.invalidateQueries({queryKey:["playVideo"]}),r({title:"Comment Deleted Successfully . . . .!",description:"At "+d.toLocaleTimeString(),duration:3e3}),i("")},onError:b=>{r({title:(b==null?void 0:b.message)||"failed please try again . . . . . !",description:"At "+d.toLocaleTimeString(),variant:"destructive",duration:3e3})}});return t.jsxs(le,{children:[t.jsx(oe,{asChild:!0,children:t.jsxs("button",{className:"gap-1 flex items-center p-1",children:[l=="new"&&t.jsx(Me,{className:"size-5"}),t.jsx("p",{children:l=="new"?"Comment":t.jsx(_e,{className:"size-3 transition-all"})})]})}),t.jsxs(ne,{className:"rounded-xl bg-opacity-80 border-[1px] border-gray-500 dark:bg-black dark:text-white text-slate-950",children:[t.jsxs(se,{className:"space-y-5",children:[t.jsx(ae,{children:"Customize Comment"}),t.jsx(ie,{children:"Make changes to your comment here. Click save when you're done."})]}),t.jsx("div",{className:"grid gap-4 ",children:t.jsxs("div",{className:"grid gap-1 underline",children:[t.jsx("label",{htmlFor:"title",className:"text-[17px]",children:"Comment :"}),t.jsx("input",{id:"title",autoFocus:!0,placeholder:"comment . . . . . .",value:a,onChange:b=>i(b.target.value),className:"w-full min-w-[200px] border-gray-500  bg-transparent border-[1px] rounded-xl outline-none p-1 pl-2"})]})}),t.jsx(ce,{className:"flex gap-3 space-y-5",children:l=="new"?t.jsx("div",{className:"flex-1",children:t.jsx("button",{onClick:()=>m.mutate({comment:a,userId:e}),className:"rounded-xl p-2  border-gray-500 border-[1px] grid place-items-center",children:m!=null&&m.isPending?t.jsx(U,{className:"animate-spin"}):"Save Comment"})}):t.jsxs("div",{className:"flex w-full justify-between gap-14",children:[t.jsx("button",{onClick:()=>c.mutate({commentId:s,comment:a}),className:"w-full my-3 rounded-xl border-[1px] border-slate-500 grid place-items-center",children:c!=null&&c.isPending?t.jsx(U,{className:"animate-spin"}):"Edit Comment"}),t.jsx("button",{onClick:()=>g==null?void 0:g.mutate(s),className:"p-2 w-full my-3 rounded-xl border-[1px] text-white grid place-items-center bg-red-700",children:g!=null&&g.isPending?t.jsx(U,{className:"animate-spin"}):"Delete Comment"})]})})]})]})},st=({apiResponse:e,videoId:o})=>{var a,i;const[l,s]=u.useState(!1),n=re().userId;return t.jsxs(K,{className:"w-full text-white overflow-scroll grid h-56 py-4 md:h-auto lg:h-fit rounded-xl p-1 border-slate-500 border-[1px] lg:min-h-fit",children:[t.jsxs("div",{className:"text-slate-700 dark:text-white text-[20px] py-4 flex w-full justify-around items-center gap-5 md:ml-5 space-y-2",children:[t.jsxs("h1",{children:["Comments : ",((a=e==null?void 0:e.allComments)==null?void 0:a.length)||"0"]}),t.jsx("h1",{className:"text-gray-400 dark:text-slate-400 text-sm bg-gray-200 dark:bg-gray-800 p-1 rounded-xl flex gap-1 cursor-default",children:t.jsx(ee,{videoId:o,userId:n,type:"new"})})]}),((i=e.allComments)==null?void 0:i.length)>0?e==null?void 0:e.allComments.map(r=>{var d,h;return t.jsxs("div",{className:"flex relative w-full text-slate-700 dark:text-slate-300 min-w-[360px] justify-between p-2 border-[1px] border-slate-300 dark:border-slate-700 rounded-xl my-1 items-center",children:[t.jsx("div",{className:"underline w-full justify-between absolute top-0 text-[12px] flex gap-3",children:t.jsx("p",{className:"absolute right-[3%]",children:Ae(r==null?void 0:r.createdAt)})}),t.jsxs("div",{className:"grid place-items-center",children:[t.jsx("img",{className:"rounded-full w-10 h-10",src:r.avatar||"https://cdn-icons-png.flaticon.com/512/4794/4794936.png",alt:"https://cdn-icons-png.flaticon.com/512/4794/4794936.png"}),t.jsx("p",{className:"text-[11px] sm:text-[13px] md:text-[14px]",children:r==null?void 0:r.username})]}),t.jsxs("div",{className:"text-slate-500 dark:text-slate-300 ml-5 w-full",children:[t.jsxs("p",{children:[l?`${(d=r==null?void 0:r.content)==null?void 0:d.substring(0,40)}`:`${r==null?void 0:r.content}`,((h=r==null?void 0:r.content)==null?void 0:h.length)>40?".......":"."]}),t.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-xs cursor-pointer absolute bottom-2 right-2",onClick:()=>s(!l),children:l?"See less . . . . .":"See more....."}),t.jsx("p",{className:"absolute right-[5%] p-1 rounded-full bg-slate-600 text-white hover:scale-110 top-[30%]",children:n==(r==null?void 0:r.owner)?t.jsx(ee,{commentId:r==null?void 0:r._id,type:"edit"}):""})]})]},(r==null?void 0:r._id)??Math.random())}):t.jsxs("div",{className:"flex w-full justify-center gap-2 text-slate-500 dark:text-slate-400 items-center",children:["No Comments......",t.jsx(ze,{})]})]})},at=({videos:e,avatar:o,username:l,className:s})=>t.jsxs("div",{className:`${s} border h-auto border-slate-700 rounded-xl px-1 mx-1 w-[350px] hidden lg:mt-2 lg:block flex-end`,children:[t.jsx("h1",{className:"underline py-3 text-center text-xl",children:"Recommended Videos"}),t.jsx("ul",{className:"grid place-items-center w-full gap-2",children:e.map(n=>t.jsx("div",{className:"border-slate-700 w-full border p-2 rounded-xl relative max-w-[450px]",children:t.jsx(Le,{titleSize:"12px",fontSize:"11px",video:n,avatar:o,username:l})},n._id))})]}),it=u.memo(at),ct=async e=>(await T.get(`/api/v1/videos/get-video/${e}`)).data.data,Tt=()=>{var d;const{videoId:e}=je(),{data:o,isLoading:l,isError:s}=Ce({queryKey:["playVideo",e],queryFn:()=>ct(e)});if(l)return t.jsx(Ne,{});if(s)return t.jsx(Pe,{});const{allComments:n,recommendedVideos:a,Uploader:i}=o,r=o;return t.jsxs("div",{className:"w-full grid h-auto lg:flex lg:gap-4 px-1 sm:pl-4 lg:grid-cols-2 text-slate-700 dark:text-slate-300 bg-white dark:bg-black pb-10 mx-auto",children:[t.jsxs("div",{className:"lg:w-full space-y-2",children:[t.jsx(Ue,{apiResponse:r}),t.jsx(Ie,{apiResponse:r}),t.jsx(Oe,{apiResponse:r,videoId:e}),t.jsx(nt,{apiResponse:r}),t.jsx(st,{apiResponse:r,videoId:e,allComments:n})]}),t.jsx(it,{className:"",videos:(d=a[0])==null?void 0:d.videos,avatar:i==null?void 0:i.avatar,username:i==null?void 0:i.username})]})};export{Tt as default};
