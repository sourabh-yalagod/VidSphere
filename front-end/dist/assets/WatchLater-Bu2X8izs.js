import{c as h,m as f,w as v,r as n,j as t,L as y,y as l,d as m}from"./index-DLPQuFyB.js";import{V as w}from"./Video-CzMNqvxG.js";import{A as g}from"./APIError-BWhawoey.js";import{u as j}from"./useQuery-DApuE4hg.js";import{u as L}from"./useMutation-CLAA17dP.js";import{S as V}from"./Skeleton-BnGMH14x.js";import{T as b}from"./trash-2-bV6fqLfT.js";import"./ellipsis-vertical-DC2i2kg6.js";import"./loader-circle-Ct6UWSQg.js";import"./eye-off-BKLs_M59.js";import"./useBaseQuery-DC6tQKz4.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=h("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),K=()=>{var c;const d=f(),{userId:r}=v(),[s,i]=n.useState(null),u=async()=>(await m.get(`/api/v1/users/all-watch-later-videos/${r}`)).data,{data:a,error:x,isLoading:p}=j({queryKey:["watchlaterVideos",r],queryFn:u,staleTime:5*60*1e3,onSuccess:e=>i(e)});n.useEffect(()=>{i(a==null?void 0:a.data)},[a]);const o=L({mutationFn:async({videoId:e})=>(await m.patch("/api/v1/users/remove-watch-later-video",{videoId:e})).data,onSuccess:e=>{d.invalidateQueries({queryKey:["watchlaterVideos"]}),l({title:"Video removed from watch later list successfully!",description:e==null?void 0:e.message,variant:"default",duration:1500})},onError:e=>{l({title:"Video removing failed . . . . . !",description:e==null?void 0:e.message,variant:"destructive",duration:1500})}});return x?t.jsx(g,{}):p?t.jsx(V,{cards:10}):t.jsx("div",{className:"min-h-screen w-full px-3 bg-#121212 pt-16 relative dark:bg-black",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-black flex gap-2 items-center dark:text-white text-xl pb-3 animate-pulse sm:text-2xl font-black",children:[t.jsx(k,{className:"size-8"}),t.jsx("p",{children:"Watch Later Videos"})]}),((c=s==null?void 0:s.watchLaterVideos)==null?void 0:c.length)>0?t.jsx("ul",{className:"grid w-full gap-2 place-items-center sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.watchLaterVideos.map(e=>t.jsx("div",{className:"border-slate-700 w-full border p-2 rounded-xl relative max-w-[450px]",children:t.jsx(w,{video:e,userId:e.owner||"",avatar:s.avatar,username:s.username,dropMenuBar:[{name:o.isPending?t.jsx(y,{className:"animate-spin"}):"Remove Video",operation:()=>o.mutate({videoId:e._id})}]})},e._id))}):t.jsxs("div",{className:"text-3xl flex gap-5 min-h-screen w-full justify-center items-center mb-11 text-center text-slate-600 my-auto",children:[t.jsx(b,{className:"size-12 text-center"}),t.jsx("p",{children:"No videos . . . . ."})]})]})})};export{K as default};
