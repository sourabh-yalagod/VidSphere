import{c as h,m as v,w as f,r as c,j as t,L as y,y as l,d}from"./index-BkiSd4PU.js";import{V as w}from"./Video-e6Ix8T5r.js";import{A as g}from"./APIError-hVJA2Bbl.js";import{u as j}from"./useQuery-BwFlSk5E.js";import{u as L}from"./useMutation-crSOYtZk.js";import{S as V}from"./Skeleton-CG9auCw_.js";import{T as b}from"./trash-2-DgR7Wmdd.js";import"./ellipsis-vertical-ClHmTm7j.js";import"./loader-circle-H1FoM2ES.js";import"./eye-off-BdMYjNIQ.js";import"./useBaseQuery-CBzHU74X.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=h("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),z=()=>{var n;const m=v(),{userId:r}=f(),[s,i]=c.useState(null),u=async()=>(await d.get(`https://videotube-auro.onrender.com/api/v1/users/all-watch-later-videos/${r}`)).data,{data:a,error:x,isLoading:p}=j({queryKey:["watchlaterVideos",r],queryFn:u,staleTime:5*60*1e3,onSuccess:e=>i(e)});c.useEffect(()=>{i(a==null?void 0:a.data)},[a]);const o=L({mutationFn:async({videoId:e})=>(await d.patch("https://videotube-auro.onrender.com/api/v1/users/remove-watch-later-video",{videoId:e})).data,onSuccess:e=>{m.invalidateQueries({queryKey:["watchlaterVideos"]}),l({title:"Video removed from watch later list successfully!",description:e==null?void 0:e.message,variant:"default",duration:1500})},onError:e=>{l({title:"Video removing failed . . . . . !",description:e==null?void 0:e.message,variant:"destructive",duration:1500})}});return x?t.jsx(g,{}):p?t.jsx(V,{cards:10}):t.jsx("div",{className:"min-h-screen w-full px-3 bg-#121212 pt-16 relative dark:bg-black",children:t.jsxs("div",{children:[t.jsxs("div",{className:"text-black flex gap-2 items-center dark:text-white text-xl pb-3 animate-pulse sm:text-2xl font-black",children:[t.jsx(k,{className:"size-8"}),t.jsx("p",{children:"Watch Later Videos"})]}),((n=s==null?void 0:s.watchLaterVideos)==null?void 0:n.length)>0?t.jsx("ul",{className:"grid w-full gap-2 place-items-center sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:s.watchLaterVideos.map(e=>t.jsx("div",{className:"border-slate-700 w-full border p-2 rounded-xl relative max-w-[450px]",children:t.jsx(w,{video:e,userId:e.owner||"",avatar:s.avatar,username:s.username,dropMenuBar:[{name:o.isPending?t.jsx(y,{className:"animate-spin"}):"Remove Video",operation:()=>o.mutate({videoId:e._id})}]})},e._id))}):t.jsxs("div",{className:"text-3xl flex gap-5 min-h-screen w-full justify-center items-center mb-11 text-center text-slate-600 my-auto",children:[t.jsx(b,{className:"size-12 text-center"}),t.jsx("p",{children:"No videos . . . . ."})]})]})})};export{z as default};
