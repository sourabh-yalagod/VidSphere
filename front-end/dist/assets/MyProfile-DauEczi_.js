import{c as ne,R as i,z as Dt,C as St,A as Et,D as Tt,E as Nt,F as jt,G as Ct,r as q,I as $t,j as o,a as ue,J as kt,T as Ot,b as Rt,m as Mt,u as At,w as It,L as Pt,V as Ht,d as Te}from"./index-DLPQuFyB.js";import{L as G}from"./loader-circle-Ct6UWSQg.js";import{U as Lt}from"./user-round-CLXGUVf3.js";import{V as Vt}from"./Video-CzMNqvxG.js";import{V as Ut}from"./VideoNotFound-BtFNEROq.js";import{A as zt}from"./APIError-BWhawoey.js";import{u as _t}from"./useQuery-DApuE4hg.js";import{u as Ue}from"./useMutation-CLAA17dP.js";import{S as Wt}from"./Skeleton-BnGMH14x.js";import{B as Bt}from"./bell-KdlITBRd.js";import"./ellipsis-vertical-DC2i2kg6.js";import"./eye-off-BKLs_M59.js";import"./useBaseQuery-DC6tQKz4.js";import"./utils-km2FGkQ4.js";/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ne("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ne("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ne("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ne("MailSearch",[["path",{d:"M22 12.5V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h7.5",key:"w80f2v"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"M18 21a3 3 0 1 0 0-6 3 3 0 0 0 0 6v0Z",key:"mgbru4"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"m22 22-1.5-1.5",key:"1x83k4"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ne("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);function Zt(e){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const Fe=i.createContext({drawerRef:{current:null},overlayRef:{current:null},scaleBackground:()=>{},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,handleOnly:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},visible:!1,closeDrawer:()=>{},setVisible:()=>{},direction:"bottom"}),ve=()=>{const e=i.useContext(Fe);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Zt("[vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1)}[vaul-drawer][vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[vaul-drawer][vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[vaul-drawer][vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[vaul-drawer][vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}.vaul-dragging .vaul-scrollable [vault-drawer-direction=top]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=bottom]{overflow-y:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=left]{overflow-x:hidden!important}.vaul-dragging .vaul-scrollable [vault-drawer-direction=right]{overflow-x:hidden!important}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-drawer][vaul-drawer-visible=true][vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[vaul-overlay]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[vaul-overlay][vaul-drawer-visible=true]{opacity:1}[vaul-drawer]::after{content:'';position:absolute;background:inherit;background-color:inherit}[vaul-drawer][vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[vaul-drawer][vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[vaul-drawer][vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[vaul-handle]{display:block;position:relative;opacity:.8;margin-left:auto;margin-right:auto;height:5px;width:56px;border-radius:1rem;touch-action:pan-y;cursor:grab}[vaul-handle]:active,[vaul-handle]:hover{opacity:1}[vaul-handle]:active{cursor:grabbing}[vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}[vaul-overlay][vaul-snap-points=true]:not([vaul-snap-points-overlay=true]):not([data-state=closed]){opacity:0}[vaul-overlay][vaul-snap-points-overlay=true]:not([vaul-drawer-visible=false]){opacity:1}@media (hover:hover) and (pointer:fine){[vaul-drawer]{user-select:none}}@media (pointer:fine){[vaul-handle-hitarea]:{width:100%;height:100%}}");const Gt=typeof window<"u"?q.useLayoutEffect:q.useEffect;function $e(...e){return(...r)=>{for(let n of e)typeof n=="function"&&n(...r)}}function Jt(){return Oe(/^Mac/)}function en(){return Oe(/^iPhone/)}function tn(){return Oe(/^iPad/)||Jt()&&navigator.maxTouchPoints>1}function qe(){return en()||tn()}function Oe(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Ne=typeof document<"u"&&window.visualViewport;function ze(e){let r=window.getComputedStyle(e);return/(auto|scroll)/.test(r.overflow+r.overflowX+r.overflowY)}function Ye(e){for(ze(e)&&(e=e.parentElement);e&&!ze(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const nn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let ge=0,je;function rn(e={}){let{isDisabled:r}=e;Gt(()=>{if(!r)return ge++,ge===1&&(qe()?je=on():je=an()),()=>{ge--,ge===0&&je()}},[r])}function an(){return $e(Xe(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`))}function on(){let e,r=0,n=p=>{e=Ye(p.target),!(e===document.documentElement&&e===document.body)&&(r=p.changedTouches[0].pageY)},t=p=>{if(!e||e===document.documentElement||e===document.body){p.preventDefault();return}let d=p.changedTouches[0].pageY,m=e.scrollTop,k=e.scrollHeight-e.clientHeight;k!==0&&((m<=0&&d>r||m>=k&&d<r)&&p.preventDefault(),r=d)},s=p=>{let d=p.target;ke(d)&&d!==document.activeElement&&(p.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},u=p=>{let d=p.target;ke(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",Ne&&(Ne.height<window.innerHeight?requestAnimationFrame(()=>{_e(d)}):Ne.addEventListener("resize",()=>_e(d),{once:!0}))}))},c=()=>{window.scrollTo(0,0)},h=window.pageXOffset,y=window.pageYOffset,T=$e(Xe(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let j=$e(se(document,"touchstart",n,{passive:!1,capture:!0}),se(document,"touchmove",t,{passive:!1,capture:!0}),se(document,"touchend",s,{passive:!1,capture:!0}),se(document,"focus",u,!0),se(window,"scroll",c));return()=>{T(),j(),window.scrollTo(h,y)}}function Xe(e,r,n){let t=e.style[r];return e.style[r]=n,()=>{e.style[r]=t}}function se(e,r,n,t){return e.addEventListener(r,n,t),()=>{e.removeEventListener(r,n,t)}}function _e(e){let r=document.scrollingElement||document.documentElement;for(;e&&e!==r;){let n=Ye(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let t=n.getBoundingClientRect().top,s=e.getBoundingClientRect().top,u=e.getBoundingClientRect().bottom;const c=n.getBoundingClientRect().bottom;u>c&&(n.scrollTop+=s-t)}e=n.parentElement}}function ke(e){return e instanceof HTMLInputElement&&!nn.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function sn(e,r){typeof e=="function"?e(r):e!=null&&(e.current=r)}function ln(...e){return r=>e.forEach(n=>sn(n,r))}function Ke(...e){return q.useCallback(ln(...e),e)}let le=null;function un({isOpen:e,modal:r,nested:n,hasBeenOpened:t,preventScrollRestoration:s,noBodyStyles:u}){const[c,h]=i.useState(()=>typeof window<"u"?window.location.href:""),y=i.useRef(0),T=i.useCallback(()=>{if(le===null&&e&&!u){le={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:p,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-y.current}px`,left:`${-p}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const m=d-window.innerHeight;m&&y.current>=d&&(document.body.style.top=`${-(y.current+m)}px`)}),300)}},[e]),j=i.useCallback(()=>{if(le!==null&&!u){const p=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,le),window.requestAnimationFrame(()=>{if(s&&c!==window.location.href){h(window.location.href);return}window.scrollTo(d,p)}),le=null}},[c]);return i.useEffect(()=>{function p(){y.current=window.scrollY}return p(),window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),i.useEffect(()=>{n||!t||(e?(!window.matchMedia("(display-mode: standalone)").matches&&T(),r||window.setTimeout(()=>{j()},500)):j())},[e,t,c,r,n,T,j]),{restorePositionSetting:j}}const Qe=new WeakMap;function S(e,r,n=!1){if(!e||!(e instanceof HTMLElement))return;let t={};Object.entries(r).forEach(([s,u])=>{if(s.startsWith("--")){e.style.setProperty(s,u);return}t[s]=e.style[s],e.style[s]=u}),!n&&Qe.set(e,t)}function we(e,r){if(!e||!(e instanceof HTMLElement))return;let n=Qe.get(e);n&&(r?e.style[r]=n[r]:Object.entries(n).forEach(([t,s])=>{e.style[t]=s}))}const A=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function pe(e,r){if(!e)return null;const n=window.getComputedStyle(e),t=n.transform||n.webkitTransform||n.mozTransform;let s=t.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[A(r)?13:12]):(s=t.match(/^matrix\((.+)\)$/),s?parseFloat(s[1].split(", ")[A(r)?5:4]):null)}function cn(e){return 8*(Math.log(e+1)-2)}const D={DURATION:.5,EASE:[.32,.72,0,1]},Ze=.4;function Ge(e){const r=i.useRef(e);return i.useEffect(()=>{r.current=e}),i.useMemo(()=>(...n)=>r.current==null?void 0:r.current.call(r,...n),[])}function dn({defaultProp:e,onChange:r}){const n=i.useState(e),[t]=n,s=i.useRef(t),u=Ge(r);return i.useEffect(()=>{s.current!==t&&(u(t),s.current=t)},[t,s,u]),n}function fn({prop:e,defaultProp:r,onChange:n=()=>{}}){const[t,s]=dn({defaultProp:r,onChange:n}),u=e!==void 0,c=u?e:t,h=Ge(n),y=i.useCallback(T=>{if(u){const p=typeof T=="function"?T(e):T;p!==e&&h(p)}else s(T)},[u,e,s,h]);return[c,y]}function mn({activeSnapPointProp:e,setActiveSnapPointProp:r,snapPoints:n,drawerRef:t,overlayRef:s,fadeFromIndex:u,onSnapPointChange:c,direction:h="bottom"}){const[y,T]=fn({prop:e,defaultProp:n==null?void 0:n[0],onChange:r}),j=i.useMemo(()=>y===(n==null?void 0:n[n.length-1])||null,[n,y]),p=n&&n.length>0&&(u||u===0)&&!Number.isNaN(u)&&n[u]===y||!n,d=i.useMemo(()=>n==null?void 0:n.findIndex(l=>l===y),[n,y]),m=i.useMemo(()=>{var l;return(l=n==null?void 0:n.map(a=>{const b=typeof window<"u",O=typeof a=="string";let R=0;if(O&&(R=parseInt(a,10)),A(h)){const g=O?R:b?a*window.innerHeight:0;return b?h==="bottom"?window.innerHeight-g:-window.innerHeight+g:g}const C=O?R:b?a*window.innerWidth:0;return b?h==="right"?window.innerWidth-C:-window.innerWidth+C:C}))!=null?l:[]},[n]),k=i.useMemo(()=>d!==null?m==null?void 0:m[d]:null,[m,d]),N=i.useCallback(l=>{var a;const b=(a=m==null?void 0:m.findIndex(O=>O===l))!=null?a:null;c(b),S(t.current,{transition:`transform ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`,transform:A(h)?`translate3d(0, ${l}px, 0)`:`translate3d(${l}px, 0, 0)`}),m&&b!==m.length-1&&b!==u?S(s.current,{transition:`opacity ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`,opacity:"0"}):S(s.current,{transition:`opacity ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`,opacity:"1"}),T(b!==null?n==null?void 0:n[b]:null)},[t.current,n,m,u,s,T]);i.useEffect(()=>{if(y||e){var l;const a=(l=n==null?void 0:n.findIndex(b=>b===e||b===y))!=null?l:-1;m&&a!==-1&&typeof m[a]=="number"&&N(m[a])}},[y,e,n,m,N]);function _({draggedDistance:l,closeDrawer:a,velocity:b,dismissible:O}){if(u===void 0)return;const R=h==="bottom"||h==="right"?(k??0)-l:(k??0)+l,C=d===u-1,g=d===0,I=l>0;if(C&&S(s.current,{transition:`opacity ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`}),b>2&&!I){O?a():N(m[0]);return}if(b>2&&I&&m&&n){N(m[n.length-1]);return}const W=m==null?void 0:m.reduce((P,F)=>typeof P!="number"||typeof F!="number"?P:Math.abs(F-R)<Math.abs(P-R)?F:P),L=A(h)?window.innerHeight:window.innerWidth;if(b>Ze&&Math.abs(l)<L*.4){const P=I?1:-1;if(P>0&&j){N(m[n.length-1]);return}if(g&&P<0&&O&&a(),d===null)return;N(m[d+P]);return}N(W)}function H({draggedDistance:l}){if(k===null)return;const a=h==="bottom"||h==="right"?k-l:k+l;(h==="bottom"||h==="right")&&a<m[m.length-1]||(h==="top"||h==="left")&&a>m[m.length-1]||S(t.current,{transform:A(h)?`translate3d(0, ${a}px, 0)`:`translate3d(${a}px, 0, 0)`})}function U(l,a){if(!n||typeof d!="number"||!m||u===void 0)return null;const b=d===u-1;if(d>=u&&a)return 0;if(b&&!a)return 1;if(!p&&!b)return null;const R=b?d+1:d-1,C=b?m[R]-m[R-1]:m[R+1]-m[R],g=l/Math.abs(C);return b?1-g:g}return{isLastSnapPoint:j,activeSnapPoint:y,shouldFade:p,getPercentageDragged:U,setActiveSnapPoint:T,activeSnapPointIndex:d,onRelease:_,onDrag:H,snapPointsOffset:m}}const hn=.25,gn=100,We=8,Z=16,Be=26,Ce="vaul-dragging";function Je({open:e,onOpenChange:r,children:n,shouldScaleBackground:t,onDrag:s,onRelease:u,snapPoints:c,nested:h=!1,setBackgroundColorOnScale:y=!0,closeThreshold:T=hn,scrollLockTimeout:j=gn,dismissible:p=!0,handleOnly:d=!1,fadeFromIndex:m=c&&c.length-1,activeSnapPoint:k,setActiveSnapPoint:N,fixed:_,modal:H=!0,onClose:U,noBodyStyles:l,direction:a="bottom",preventScrollRestoration:b=!0,disablePreventScroll:O=!1}){var R;const[C=!1,g]=i.useState(!1),[I,W]=i.useState(!1),[L,P]=i.useState(!1),[F,ce]=i.useState(!1),[X,xe]=i.useState(!1),[lt,Re]=i.useState(!1),K=i.useRef(null),de=i.useRef(null),be=i.useRef(null),ye=i.useRef(null),re=i.useRef(null),ae=i.useRef(!1),De=i.useRef(null),Se=i.useRef(0),J=i.useRef(!1),Me=i.useRef(0),w=i.useRef(null),Ae=i.useRef(((R=w.current)==null?void 0:R.getBoundingClientRect().height)||0),Ee=i.useRef(0),ut=i.useCallback(f=>{c&&f===oe.length-1&&(de.current=new Date)},[]),{activeSnapPoint:ct,activeSnapPointIndex:ie,setActiveSnapPoint:Ie,onRelease:dt,snapPointsOffset:oe,onDrag:ft,shouldFade:Pe,getPercentageDragged:mt}=mn({snapPoints:c,activeSnapPointProp:k,setActiveSnapPointProp:N,drawerRef:w,fadeFromIndex:m,overlayRef:K,onSnapPointChange:ut,direction:a});rn({isDisabled:!C||X||!H||lt||!I||O});const{restorePositionSetting:ht}=un({isOpen:C,modal:H,nested:h,hasBeenOpened:I,preventScrollRestoration:b,noBodyStyles:l});function ee(){return(window.innerWidth-Be)/window.innerWidth}function gt(f){var v;!p&&!c||w.current&&!w.current.contains(f.target)||(Ae.current=((v=w.current)==null?void 0:v.getBoundingClientRect().height)||0,xe(!0),be.current=new Date,qe()&&window.addEventListener("touchend",()=>ae.current=!1,{once:!0}),f.target.setPointerCapture(f.pointerId),Se.current=A(a)?f.clientY:f.clientX)}function He(f,v){var E;let x=f;const $=(E=window.getSelection())==null?void 0:E.toString(),M=w.current?pe(w.current,a):null,V=new Date;if(x.hasAttribute("data-vaul-no-drag")||x.closest("[data-vaul-no-drag]"))return!1;if(a==="right"||a==="left")return!0;if(de.current&&V.getTime()-de.current.getTime()<500)return!1;if(M!==null&&(a==="bottom"?M>0:M<0))return!0;if($&&$.length>0)return!1;if(re.current&&V.getTime()-re.current.getTime()<j&&M===0||v)return re.current=V,!1;for(;x;){if(x.scrollHeight>x.clientHeight){if(x.scrollTop!==0)return re.current=new Date,!1;if(x.getAttribute("role")==="dialog")return!0}x=x.parentNode}return!0}function wt(f){if(w.current&&X){const v=a==="bottom"||a==="right"?1:-1,E=(Se.current-(A(a)?f.clientY:f.clientX))*v,x=E>0,$=c&&!p&&!x;if($&&ie===0)return;const M=Math.abs(E),V=document.querySelector("[vaul-drawer-wrapper]");let B=M/Ae.current;const Y=mt(M,x);if(Y!==null&&(B=Y),$&&B>=1||!ae.current&&!He(f.target,x))return;if(w.current.classList.add(Ce),ae.current=!0,S(w.current,{transition:"none"}),S(K.current,{transition:"none"}),c&&ft({draggedDistance:E}),x&&!c){const Q=cn(E),he=Math.min(Q*-1,0)*v;S(w.current,{transform:A(a)?`translate3d(0, ${he}px, 0)`:`translate3d(${he}px, 0, 0)`});return}const me=1-B;if((Pe||m&&ie===m-1)&&(s==null||s(f,B),S(K.current,{opacity:`${me}`,transition:"none"},!0)),V&&K.current&&t){const Q=Math.min(ee()+B*(1-ee()),1),he=8-B*8,Ve=Math.max(0,14-B*14);S(V,{borderRadius:`${he}px`,transform:A(a)?`scale(${Q}) translate3d(0, ${Ve}px, 0)`:`scale(${Q}) translate3d(${Ve}px, 0, 0)`,transition:"none"},!0)}if(!c){const Q=M*v;S(w.current,{transform:A(a)?`translate3d(0, ${Q}px, 0)`:`translate3d(${Q}px, 0, 0)`})}}}i.useEffect(()=>()=>{fe(!1),ht()},[]),i.useEffect(()=>{var f;function v(){if(!w.current)return;const E=document.activeElement;if(ke(E)||J.current){var x;const $=((x=window.visualViewport)==null?void 0:x.height)||0;let M=window.innerHeight-$;const V=w.current.getBoundingClientRect().height||0;Ee.current||(Ee.current=V);const B=w.current.getBoundingClientRect().top;if(Math.abs(Me.current-M)>60&&(J.current=!J.current),c&&c.length>0&&oe&&ie){const Y=oe[ie]||0;M+=Y}if(Me.current=M,V>$||J.current){const Y=w.current.getBoundingClientRect().height;let me=Y;Y>$&&(me=$-Be),_?w.current.style.height=`${Y-Math.max(M,0)}px`:w.current.style.height=`${Math.max(me,$-B)}px`}else w.current.style.height=`${Ee.current}px`;c&&c.length>0&&!J.current?w.current.style.bottom="0px":w.current.style.bottom=`${Math.max(M,0)}px`}}return(f=window.visualViewport)==null||f.addEventListener("resize",v),()=>{var E;return(E=window.visualViewport)==null?void 0:E.removeEventListener("resize",v)}},[ie,c,oe]);function te(){w.current&&(pt(),U==null||U(),S(w.current,{transform:A(a)?`translate3d(0, ${a==="bottom"?"100%":"-100%"}, 0)`:`translate3d(${a==="right"?"100%":"-100%"}, 0, 0)`,transition:`transform ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`}),S(K.current,{opacity:"0",transition:`opacity ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`}),fe(!1),setTimeout(()=>{P(!1),g(!1)},300),setTimeout(()=>{c&&Ie(c[0])},D.DURATION*1e3))}i.useEffect(()=>{if(!C&&t){const f=setTimeout(()=>{we(document.body)},200);return()=>clearTimeout(f)}},[C,t]),i.useLayoutEffect(()=>{e?(g(!0),W(!0)):te()},[e]),i.useEffect(()=>{F&&(r==null||r(C))},[C]),i.useEffect(()=>{ce(!0)},[]);function Le(){if(!w.current)return;const f=document.querySelector("[vaul-drawer-wrapper]"),v=pe(w.current,a);S(w.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`}),S(K.current,{transition:`opacity ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`,opacity:"1"}),t&&v&&v>0&&C&&S(f,{borderRadius:`${We}px`,overflow:"hidden",...A(a)?{transform:`scale(${ee()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${ee()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${D.DURATION}s`,transitionTimingFunction:`cubic-bezier(${D.EASE.join(",")})`},!0)}function pt(){!X||!w.current||(w.current.classList.remove(Ce),ae.current=!1,xe(!1),ye.current=new Date)}function vt(f){if(!X||!w.current)return;w.current.classList.remove(Ce),ae.current=!1,xe(!1),ye.current=new Date;const v=pe(w.current,a);if(!He(f.target,!1)||!v||Number.isNaN(v)||be.current===null)return;const E=ye.current.getTime()-be.current.getTime(),x=Se.current-(A(a)?f.clientY:f.clientX),$=Math.abs(x)/E;if($>.05&&(Re(!0),setTimeout(()=>{Re(!1)},200)),c){dt({draggedDistance:x*(a==="bottom"||a==="right"?1:-1),closeDrawer:te,velocity:$,dismissible:p}),u==null||u(f,!0);return}if(a==="bottom"||a==="right"?x>0:x<0){Le(),u==null||u(f,!0);return}if($>Ze){te(),u==null||u(f,!1);return}var M;const V=Math.min((M=w.current.getBoundingClientRect().height)!=null?M:0,window.innerHeight);if(v>=V*T){te(),u==null||u(f,!1);return}u==null||u(f,!0),Le()}i.useEffect(()=>{C&&(S(document.documentElement,{scrollBehavior:"auto"}),de.current=new Date,fe(!0))},[C]),i.useEffect(()=>{if(w.current&&L){var f;const v=w==null||(f=w.current)==null?void 0:f.querySelectorAll("*");v==null||v.forEach(E=>{const x=E;(x.scrollHeight>x.clientHeight||x.scrollWidth>x.clientWidth)&&x.classList.add("vaul-scrollable")})}},[L]);function fe(f){const v=document.querySelector("[vaul-drawer-wrapper]");!v||!t||(f?(y&&(l||(S(document.body,{background:document.body.style.backgroundColor||document.body.style.background}),S(document.body,{background:"black"},!0))),S(v,{borderRadius:`${We}px`,overflow:"hidden",...A(a)?{transform:`scale(${ee()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${ee()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${D.DURATION}s`,transitionTimingFunction:`cubic-bezier(${D.EASE.join(",")})`})):(we(v,"overflow"),we(v,"transform"),we(v,"borderRadius"),S(v,{transitionProperty:"transform, border-radius",transitionDuration:`${D.DURATION}s`,transitionTimingFunction:`cubic-bezier(${D.EASE.join(",")})`})))}function xt(f){const v=f?(window.innerWidth-Z)/window.innerWidth:1,E=f?-Z:0;De.current&&window.clearTimeout(De.current),S(w.current,{transition:`transform ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`,transform:`scale(${v}) translate3d(0, ${E}px, 0)`}),!f&&w.current&&(De.current=setTimeout(()=>{const x=pe(w.current,a);S(w.current,{transition:"none",transform:A(a)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`})},500))}function bt(f,v){if(v<0)return;const E=A(a)?window.innerHeight:window.innerWidth,x=(E-Z)/E,$=x+v*(1-x),M=-Z+v*Z;S(w.current,{transform:A(a)?`scale(${$}) translate3d(0, ${M}px, 0)`:`scale(${$}) translate3d(${M}px, 0, 0)`,transition:"none"})}function yt(f,v){const E=A(a)?window.innerHeight:window.innerWidth,x=v?(E-Z)/E:1,$=v?-Z:0;v&&S(w.current,{transition:`transform ${D.DURATION}s cubic-bezier(${D.EASE.join(",")})`,transform:A(a)?`scale(${x}) translate3d(0, ${$}px, 0)`:`scale(${x}) translate3d(${$}px, 0, 0)`})}return i.createElement($t,{modal:H,onOpenChange:f=>{if(e!==void 0){r==null||r(f);return}f?(W(!0),g(f)):te()},open:C},i.createElement(Fe.Provider,{value:{visible:L,activeSnapPoint:ct,snapPoints:c,setActiveSnapPoint:Ie,drawerRef:w,overlayRef:K,scaleBackground:fe,onOpenChange:r,onPress:gt,setVisible:P,onRelease:vt,onDrag:wt,dismissible:p,handleOnly:d,isOpen:C,isDragging:X,shouldFade:Pe,closeDrawer:te,onNestedDrag:bt,onNestedOpenChange:xt,onNestedRelease:yt,keyboardIsOpen:J,openProp:e,modal:H,snapPointsOffset:oe,direction:a}},n))}const wn=250,pn=120,et=i.forwardRef(function({preventCycle:e=!1,children:r,...n},t){const{visible:s,closeDrawer:u,isDragging:c,snapPoints:h,activeSnapPoint:y,setActiveSnapPoint:T,dismissible:j,handleOnly:p,onPress:d,onDrag:m}=ve(),k=i.useRef(null),N=i.useRef(!1);function _(){if(N.current){l();return}window.setTimeout(()=>{H()},pn)}function H(){if(c||e||N.current){l();return}if(l(),(!h||h.length===0)&&j){u();return}if(y===h[h.length-1]&&j){u();return}const b=h.findIndex(R=>R===y);if(b===-1)return;const O=h[b+1];T(O)}function U(){k.current=window.setTimeout(()=>{N.current=!0},wn)}function l(){window.clearTimeout(k.current),N.current=!1}return i.createElement("div",{onClick:_,onDoubleClick:()=>{N.current=!0,u()},onPointerCancel:l,onPointerDown:a=>{p&&d(a),U()},onPointerMove:a=>{p&&m(a)},ref:t,"vaul-drawer-visible":s?"true":"false","vaul-handle":"","aria-hidden":"true",...n},i.createElement("span",{"vaul-handle-hitarea":"","aria-hidden":"true"},r))});et.displayName="Drawer.Handle";const tt=i.forwardRef(function({children:e,...r},n){const{overlayRef:t,snapPoints:s,onRelease:u,shouldFade:c,isOpen:h,visible:y}=ve(),T=Ke(n,t),j=s&&s.length>0;return i.createElement(Dt,{onMouseUp:u,ref:T,"vaul-drawer-visible":y?"true":"false","vaul-overlay":"","vaul-snap-points":h&&j?"true":"false","vaul-snap-points-overlay":h&&c?"true":"false",...r})});tt.displayName="Drawer.Overlay";const nt=i.forwardRef(function({onOpenAutoFocus:e,onPointerDownOutside:r,onAnimationEnd:n,style:t,...s},u){const{drawerRef:c,onPress:h,onRelease:y,onDrag:T,dismissible:j,keyboardIsOpen:p,snapPointsOffset:d,visible:m,closeDrawer:k,modal:N,openProp:_,onOpenChange:H,setVisible:U,handleOnly:l,direction:a}=ve(),b=Ke(u,c),O=i.useRef(null),R=i.useRef(!1),C=(g,I,W=0)=>{if(R.current)return!0;const L=Math.abs(g.y),P=Math.abs(g.x),F=P>L,ce=["bottom","right"].includes(I)?1:-1;if(I==="left"||I==="right"){if(!(g.x*ce<0)&&P>=0&&P<=W)return F}else if(!(g.y*ce<0)&&L>=0&&L<=W)return!F;return R.current=!0,!0};return i.useEffect(()=>{U(!0)},[]),i.createElement(St,{"vaul-drawer":"","vaul-drawer-direction":a,"vaul-drawer-visible":m?"true":"false",...s,ref:b,style:d&&d.length>0?{"--snap-point-height":`${d[0]}px`,...t}:t,onOpenAutoFocus:g=>{if(e)e(g);else{var I;g.preventDefault(),(I=c.current)==null||I.focus()}},onPointerDown:g=>{l||(s.onPointerDown==null||s.onPointerDown.call(s,g),O.current={x:g.clientX,y:g.clientY},h(g))},onPointerDownOutside:g=>{if(r==null||r(g),!N||g.defaultPrevented){g.preventDefault();return}p.current&&(p.current=!1),g.preventDefault(),H==null||H(!1),!(!j||_!==void 0)&&k()},onFocusOutside:g=>{if(!N){g.preventDefault();return}},onEscapeKeyDown:g=>{if(!N){g.preventDefault();return}},onPointerMove:g=>{if(l||(s.onPointerMove==null||s.onPointerMove.call(s,g),!O.current))return;const I=g.clientY-O.current.y,W=g.clientX-O.current.x,L=g.pointerType==="touch"?10:2;C({x:W,y:I},a,L)?T(g):(Math.abs(W)>L||Math.abs(I)>L)&&(O.current=null)},onPointerUp:g=>{s.onPointerUp==null||s.onPointerUp.call(s,g),O.current=null,R.current=!1,y(g)}})});nt.displayName="Drawer.Content";function vn({onDrag:e,onOpenChange:r,...n}){const{onNestedDrag:t,onNestedOpenChange:s,onNestedRelease:u}=ve();if(!t)throw new Error("Drawer.NestedRoot must be placed in another drawer");return i.createElement(Je,{nested:!0,onClose:()=>{s(!1)},onDrag:(c,h)=>{t(c,h),e==null||e(c,h)},onOpenChange:c=>{c&&s(c),r==null||r(c)},onRelease:u,...n})}const z={Root:Je,NestedRoot:vn,Content:nt,Handle:et,Overlay:tt,Trigger:Et,Portal:Tt,Close:Nt,Title:jt,Description:Ct},rt=({shouldScaleBackground:e=!0,...r})=>o.jsx(z.Root,{shouldScaleBackground:e,...r});rt.displayName="Drawer";const xn=z.Trigger,bn=z.Portal,yn=z.Close,at=q.forwardRef(({className:e,...r},n)=>o.jsx(z.Overlay,{ref:n,className:ue("fixed inset-0 z-50 bg-black/80",e),...r}));at.displayName=z.Overlay.displayName;const it=q.forwardRef(({className:e,children:r,...n},t)=>o.jsxs(bn,{children:[o.jsx(at,{}),o.jsxs(z.Content,{ref:t,className:ue("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...n,children:[o.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]}));it.displayName="DrawerContent";const ot=({className:e,...r})=>o.jsx("div",{className:ue("mt-auto flex flex-col gap-2 p-4",e),...r});ot.displayName="DrawerFooter";const st=q.forwardRef(({className:e,...r},n)=>o.jsx(z.Title,{ref:n,className:ue("text-lg font-semibold leading-none tracking-tight",e),...r}));st.displayName=z.Title.displayName;const Dn=q.forwardRef(({className:e,...r},n)=>o.jsx(z.Description,{ref:n,className:ue("text-sm text-muted-foreground",e),...r}));Dn.displayName=z.Description.displayName;function Sn({data:e}){return o.jsxs(rt,{children:[o.jsx(xn,{asChild:!0,children:o.jsx(qt,{className:"size-9 sm:size-10 sm:m-4 md:m-8 md:size-12 cursor-pointer hover:scale-95 transition-all m-2 text-white bg-black p-2 rounded-lg"})}),o.jsxs(it,{className:"w-full bg-gray-100 bg-opacity-90 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[o.jsxs(st,{className:"py-10 font-semibold text-3xl text-center",children:[o.jsx("span",{className:"font-bold capitalize animate-pulse text-blue-500",children:e.username}),"'s Profile Data"]}),o.jsxs("ul",{className:"w-full text-[19px] grid px-3 justify-center space-y-5",children:[o.jsxs("li",{className:"underline flex gap-2 items-center text-gray-900 dark:text-gray-100",children:[o.jsx(Qt,{}),"Fullname : ",e.fullname||o.jsx(G,{className:"animate-spin"})]}),o.jsxs("li",{className:"underline flex gap-2 items-center text-gray-900 dark:text-gray-100",children:[o.jsx(kt,{}),"UserName : ",e.username||o.jsx(G,{className:"animate-spin"})]}),o.jsxs("li",{className:"underline flex gap-2 items-center text-gray-900 dark:text-gray-100",children:[o.jsx(Xt,{}),"Email : ",e.email||o.jsx(G,{className:"animate-spin"})]}),o.jsxs("li",{className:"underline flex gap-2 items-center text-gray-900 dark:text-gray-100",children:[o.jsx(Lt,{}),"Total Subscribers :"," ",e.subscribers??"0"??o.jsx(G,{className:"animate-spin"})]}),o.jsxs("li",{className:"text-xl flex gap-2 mr-7 text-gray-900 dark:text-gray-100",children:[o.jsx(Ot,{}),"Total Likes :"," ",e.likes??"0"??o.jsx(G,{className:"animate-spin"})]}),o.jsxs("li",{className:"text-xl flex gap-2 mr-7 text-gray-900 dark:text-gray-100",children:[o.jsx(Kt,{}),"Total Comments :"," ",e.comments??"0"??o.jsx(G,{className:"animate-spin"})]})]}),o.jsx(ot,{className:"w-full flex items-center justify-around",children:o.jsx(yn,{asChild:!0,children:o.jsxs("button",{className:"flex gap-2 items-center bg-red-500 p-2 text-white rounded-lg cursor-pointer hover:scale-90 transition",children:[o.jsx(Yt,{className:"mr-5"}),"Close"]})})})]})]})}const Ln=()=>{var N,_,H,U;const{toast:e}=Rt(),r=Mt(),n=At(),[t,s]=q.useState(""),{userId:u}=It(),c=async()=>{const l=await Te.get(`/api/v1/user-profiles/user-profile/${u}`);return l==null?void 0:l.data},{data:h,isPending:y,error:T}=_t({queryKey:["userProfile"],queryFn:c,staleTime:5*60*1e3});q.useEffect(()=>{s(h==null?void 0:h.data)},[h]);const j={fullname:t?t==null?void 0:t.fullname:"-",username:t?t==null?void 0:t.username:"-",email:t?t==null?void 0:t.email:"-",subscribers:t?t==null?void 0:t.subscribers:"-",likes:t?(N=t==null?void 0:t.likes[0])==null?void 0:N.totallikes:"-",comments:t?(_=t==null?void 0:t.comments[0])==null?void 0:_.totalComments:"-"},d=Ue({mutationFn:async({subscribe:l,userId:a})=>{const b=await Te.post("/api/v1/users/handle-subscribers",{subscriptionStatus:l,ChannelId:a});return b==null?void 0:b.data},onSuccess:()=>{r.invalidateQueries({queryKey:["userProfile"]}),e({title:"Subscription handled Successfully . . . . !",variant:"default",duration:1200})},onError:l=>{e({title:"Error while fetching user Profile data . . .  . . . !",description:l==null?void 0:l.message,variant:"destructive",duration:1200})}}),k=Ue({mutationFn:async({videoId:l})=>{const a=await Te.delete(`/api/v1/videos/delete-video/${l}`);return a==null?void 0:a.data},onSuccess:()=>{r.invalidateQueries({queryKey:["userProfile"]}),e({title:"Video deleted Succesfully",variant:"default",duration:1200})},onError:l=>{e({title:"Error while deleting the video . . .  . . . !",description:l==null?void 0:l.message,variant:"destructive",duration:1200})}});return T?o.jsx(zt,{}):y?o.jsx(Wt,{cards:10}):o.jsxs("div",{className:"mx-auto w-full min-h-scree grid items-start dark:bg-black",children:[o.jsx("div",{className:"w-full h-[140px] sm:h-[180px] md:h-[220px] dark:dark:bg-black bg-white bg-cover bg-center relative",style:{backgroundImage:`url(${t==null?void 0:t.coverImage})`},children:o.jsx(Sn,{data:j})}),o.jsxs("div",{className:"w-full flex justify-between md:px-20 lg:px-28 my-5 items-center px-5 gap-3 border-[0.2px] border-slate-700 rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center mt-1 justify-around gap-3",children:[o.jsx("div",{className:"size-[80px] sm:size-[90px] md:size-[95px] rounded-full border-[2px] border-white dark:border-slate-800",style:{backgroundImage:`url(${t==null?void 0:t.avatar})`}}),o.jsxs("div",{className:"grid",children:[o.jsx("p",{className:"text-slate-900 dark:text-white text-[18px] sm:text-2xl",children:t==null?void 0:t.fullname}),o.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-[15px] sm:text-[19px] flex gap-2 items-center",children:["@",t==null?void 0:t.username,o.jsx(Ft,{})]}),o.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-[15px] sm:text-[19px] flex gap-2 items-center",children:[(t==null?void 0:t.subscribers)||"0"," - Subscribers"]})]})]}),o.jsx("button",{onClick:()=>d.mutate({subscribe,userId:u}),className:`${t!=null&&t.isSubscribed?"bg-gray-700":"bg-red-600"} text-white py-1 px-3 rounded-xl sm:text-xl md:text-2xl`,children:o.jsxs("p",{className:"flex gap-2 items-center",children:[d.isPending&&o.jsx(Pt,{className:"animate-spin"}),"Subscribe",t!=null&&t.isSubscribed?o.jsx(Bt,{className:"size-4 sm:size-6 md:size-8"}):""]})})]}),o.jsx("div",{className:"mt-5 md:mt-4 w-full min-h-auto grid place-items-center px-5",children:((H=t==null?void 0:t.videos)==null?void 0:H.length)>0?o.jsx("ul",{className:"grid w-full gap-2 place-items-center sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:(U=t==null?void 0:t.videos)==null?void 0:U.map(l=>o.jsx("div",{className:"border-slate-700 w-full border p-2 rounded-xl relative max-w-[450px]",children:o.jsx(Vt,{video:l,userId:t._id,avatar:t==null?void 0:t.avatar,username:t==null?void 0:t.username,playlist:t.playlist,dropMenuBar:[{name:k.isPending?o.jsx(G,{className:"animate-spin"}):"Delete Video",operation:()=>k.mutate({videoId:l==null?void 0:l._id})},{name:"Add-video To playlist"}]})},l._id))}):o.jsx("div",{className:"text-xl pt-5 grid justify-center place-items-center text-center text-slate-900 dark:text-white",children:o.jsx(Ut,{children:o.jsxs("button",{onClick:()=>n("/signin/upload-video"),className:"flex gap-4 absolute text-[17px] items-center border text-white px-3 py-1 rounded-xl hover:scale-105 transition-all",children:[o.jsx(Ht,{}),"Upload Video"]})})})})]})};export{Ln as default};
